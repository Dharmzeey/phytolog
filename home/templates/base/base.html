{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="A database of trees around you. Find information about tree species, their uses, locations, and more."
    />
    <meta name="author" content="Adam Olanrewaju, Dharmzeey" />
    <meta
      name="keywords"
      content="Trees, Tree Species, Plants, Tree Uses, Tree Locations, Tree Database"
    />

    <meta name="application-name" content="Tree Database" />
    <meta name="apple-mobile-web-app-title" content="Tree Database" />

    <meta
      property="og:image"
      content="https://local-trees.dharmzeey.com/static/icons/icon_tree.png"
    />
    <meta
      name="twitter:image"
      content="https://local-trees.dharmzeey.com/static/icons/icon_tree.png"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="{% static 'styles/modern.css' %}" />
    <link
      rel="shortcut icon"
      href="{% static 'icons/icon_tree.png' %}"
      type="image/jpg"
    />
    {% block title %}
    <title>Tree Database</title>
    {% endblock %}
  </head>

  <body>
    {% if messages %}
    <div class="message" id="pop-up">
        {% for message in messages %}
        <div>{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <header class="header">
      <div class="container">
        <div class="header-content">
          <a href="{% url 'home:home' %}" class="logo">
            TREE DATABASE
          </a>
          
          <button class="menu-toggle" id="menu-toggle">
            <span id="menu-icon">☰</span>
            <span id="close-icon" class="hidden">✕</span>
          </button>
          
          <nav class="nav-menu" id="nav-menu">
            {% if request.user.is_authenticated %}
            <div class="user-profile">
              <img src="{{ request.user.picture.url }}" alt="Profile" class="user-avatar" />
              <span>{{ request.user.username }}</span>
            </div>
            {% endif %}
            
            <ul>
              <li><a href="{% url 'home:home' %}">Home</a></li>
              <li><a href="{% url 'home:acknowledgement' %}">Acknowledgement</a></li>
              <li><a href="{% url 'home:contributors' %}">Contributors</a></li>
              <li><a href="{% url 'special:special' %}">Special Places</a></li>
              <li><a href="{% url 'home:tree_album' %}">Tree Album</a></li>
              <li><a href="{% url 'home:how_to_use' %}">How to Use</a></li>
              <li><a href="{% url 'treerequest:treerequest' %}">Request</a></li>
              <li><a href="{% url 'home:about' %}">About</a></li>
              
              {% if request.user.is_authenticated and request.user.is_staff %}
              <li><a href="{% url 'treerequest:requests' %}">View Requests</a></li>
              <li><a href="{% url 'upload:upload' %}">Upload Tree</a></li>
              <li><a href="{% url 'special:upload' %}">Upload Special</a></li>
              {% endif %}
              
              {% if request.user.is_authenticated %}
              <li><a href="{% url 'user:update' %}">Profile</a></li>
              <li><a href="{% url 'logout' %}">Logout</a></li>
              {% else %}
              <li><a href="{% url 'user:login' %}">Login</a></li>
              <li><a href="{% url 'user:register' %}">Register</a></li>
              {% endif %}
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="container">
        {% block content %}
        {% endblock %}
      </div>
    </main>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          {% if request.user.is_authenticated %}
          <p>Total Inventory as at: {{ request.session.time }} - {{ request.session.counter }} Trees</p>
          {% else %}
          <p>&copy; 2025 Tree Database. All rights reserved.</p>
          {% endif %}
        </div>
      </div>
    </footer>

    <script src="{% static 'js/modern.js' %}"></script>
  </body>
</html>
